var TypeAhead=function(){var e={query:"",products:[]},t=null;return setState=function(n,r){e.hasOwnProperty(n)&&e[n]!==r&&(e[n]=r,t.dispatchEvent(new CustomEvent("stateChanged",{detail:{key:n,value:r}})))},fetch("/products.json").then(function(e){return e.json()}).then(function(e){setState("products",e.products)}),renderSuggestions=function(e){var n=e.map(function(e){return`<div data-type="product" data-url="${e.url}">${e.name}</div>`});t.querySelector("#options").innerHTML=n.join("")},{init:function(n){t=n;var r=document.createElement("div");r.setAttribute("id","options"),t.appendChild(r),t.addEventListener("stateChanged",function(t){if("query"==t.detail.key)if(t.detail.value.length>2){var n=e.products.filter(function(e){return e.name.toLowerCase().includes(t.detail.value)});r.innerHtml="",renderSuggestions(n)}else r.innerHTML=""}),document.addEventListener("click",function(e){e.target!==r&&(r.innerHTML="")}),t.addEventListener("click",function(e){var t=e.target;t.hasAttribute("data-type")&&(document.location="#!/products/"+t.getAttribute("data-url"),r.innerHTML="")}),t.querySelector("#query").addEventListener("keyup",function(e){e.preventDefault(),setState("query",e.target.value.trim())})}}}();TypeAhead.init(document.querySelector("#typeahead"));
